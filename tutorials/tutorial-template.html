<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{TITLE}} - Paolo Camerin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../styles.css">
    <link rel="stylesheet" href="../tutorial-styles.css">
    <!-- Favicon (auto-adapts to light/dark mode) -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <meta name="description" content="{{DESCRIPTION}}" />
</head>

<body>
    <main class="tutorial-main">
        <div class="tutorial-container">

            {{HERO_IMAGE_SECTION}}

            <header class="tutorial-header">
                <h1 class="tutorial-title">{{TITLE}}</h1>
                {{SUBTITLE_HTML}}
                {{VIDEO_SECTION}}
            </header>

            <div class="tutorial-content">
                {{CONTENT_HTML}}

                <!-- Assets Download Section -->
                <section class="assets-section">
                    <h2>Download Assets</h2>
                    <p class="assets-description">Click the buttons below to download the assets for this tutorial:</p>
                    <div class="assets-grid" id="assetsContainer">
                        <!-- Assets will be dynamically added here -->
                    </div>
                </section>
            </div>

            <footer class="tutorial-footer">
                <p class="copyright">Â© <script>document.write(new Date().getFullYear())</script> Paolo Camerin</p>
            </footer>
        </div>
    </main>

    <script>
        // Assets for this tutorial
        const assets = {{ASSETS_JSON}};
        
        // Render assets using safe DOM methods (prevents XSS)
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('assetsContainer');
            if (!container) return;
            
            // Clear container safely
            container.textContent = '';
            
            if (assets.length === 0) {
                const msg = document.createElement('p');
                msg.style.color = 'var(--secondary-color)';
                msg.textContent = 'No assets available for this tutorial.';
                container.appendChild(msg);
                return;
            }
            
            assets.forEach(asset => {
                const link = document.createElement('a');
                link.href = asset.path;
                link.download = '';
                link.className = 'asset-button';
                
                const icon = document.createElement('span');
                icon.className = 'asset-icon';
                icon.textContent = asset.icon;
                
                const name = document.createElement('span');
                name.className = 'asset-name';
                name.textContent = asset.name;
                
                const size = document.createElement('span');
                size.className = 'asset-size';
                size.textContent = asset.size;
                
                link.append(icon, name, size);
                container.appendChild(link);
            });
        });
    </script>
</body>

</html>
